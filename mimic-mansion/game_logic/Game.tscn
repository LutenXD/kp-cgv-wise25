[gd_scene format=3 uid="uid://74y3u1sq1kck"]

[ext_resource type="Script" uid="uid://dd5dcr0sphys6" path="res://game_logic/game_manager.gd" id="1_i57b4"]
[ext_resource type="PackedScene" uid="uid://dcgrdn7ba5t7l" path="res://ui/hud.tscn" id="2_12xgp"]
[ext_resource type="PackedScene" uid="uid://ds3jhm0iytcta" path="res://entities/player/player.tscn" id="3_11dh7"]
[ext_resource type="PackedScene" uid="uid://dhtmqv2uvnvy8" path="res://entities/NPCs/mimic.tscn" id="4_12xgp"]
[ext_resource type="PackedScene" uid="uid://uqb5rigsgygs" path="res://entities/NPCs/evaluator.tscn" id="5_11dh7"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_h2yt5"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_dsqel"]
sky_material = SubResource("ProceduralSkyMaterial_h2yt5")

[sub_resource type="Environment" id="Environment_hcq1q"]
background_mode = 2
sky = SubResource("Sky_dsqel")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_dvuwv"]

[sub_resource type="Gradient" id="Gradient_amuej"]
colors = PackedColorArray(0, 0, 0, 1, 0.1882353, 0.5529412, 0.23921569, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_dsqel"]
noise_type = 3
fractal_type = 3

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_tp1t3"]
width = 64
height = 64
noise = SubResource("FastNoiseLite_dsqel")
color_ramp = SubResource("Gradient_amuej")
seamless = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_w72v2"]
albedo_texture = SubResource("NoiseTexture2D_tp1t3")
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_je483"]
material = SubResource("StandardMaterial3D_w72v2")
size = Vector2(100, 100)

[node name="Game" type="Node3D" unique_id=1598571889]
script = ExtResource("1_i57b4")
mimic_pre_instructions = "You are an NPC in an educational game about computer graphics. Your role is to teach the player about the following concept. Explain the underlying concept so the player understands *why* the answer is correct.

**Question, Answer and Explanation:**"
mimic_post_instructions = "Rules:
- Do not repeat the question verbatim.
- restate the answer as a final verdict.
- Use the explanation as the factual source of truth.

Style:
- Clear and concise.
- Neutral, instructional tone.
- No encouragement or praise.
- No emojis.

**Do not break character.**
**Answer in not more than 3 sentances at a time.**

OUTPUT FORMAT (STRICT):

You MUST respond with ONE valid JSON object and NOTHING else.
No text before the JSON.
No text after the JSON.
No markdown.
No code fences.
No explanations outside JSON.

If you output anything outside the JSON object, the response is invalid."

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=120330231]
environment = SubResource("Environment_hcq1q")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=332188963]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="HUD" parent="." unique_id=364530958 node_paths=PackedStringArray("player") instance=ExtResource("2_12xgp")]
player = NodePath("../Player")

[node name="Player" parent="." unique_id=947552428 instance=ExtResource("3_11dh7")]

[node name="Floor" type="StaticBody3D" parent="." unique_id=1875859571]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor" unique_id=986043041]
shape = SubResource("WorldBoundaryShape3D_dvuwv")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor" unique_id=1732459535]
mesh = SubResource("PlaneMesh_je483")

[node name="MimicContainer" type="Node3D" parent="." unique_id=1896974085]
unique_name_in_owner = true

[node name="Mimic" parent="MimicContainer" unique_id=766133172 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.47159684, 0, 0.8818143, 0, 1, 0, -0.8818143, 0, 0.47159684, -5.1566706, 0.41861773, -3.1866372)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"

[node name="Mimic2" parent="MimicContainer" unique_id=1240559959 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, -0.06337738, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "fransob"

[node name="Mimic3" parent="MimicContainer" unique_id=1082312390 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, 2.5802348, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "bruno"

[node name="Mimic4" parent="MimicContainer" unique_id=139568309 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, 5.5756397, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "jans"

[node name="Mimic6" parent="MimicContainer" unique_id=1976606061 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, 11.223776, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "frob"

[node name="Mimic7" parent="MimicContainer" unique_id=31298596 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, 14.159206, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "frans"

[node name="Mimic5" parent="MimicContainer" unique_id=509593022 instance=ExtResource("4_12xgp")]
transform = Transform3D(0.9994179, 0, -0.03411454, 0, 1, 0, 0.03411454, 0, 0.9994179, 8.638177, 0.41861773, -5.9175634)
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "piper"
voice_piper = "frunons"

[node name="Evaluator" parent="." unique_id=1298203808 instance=ExtResource("5_11dh7")]
transform = Transform3D(0.1740092, 0, -0.9847441, 0, 1, 0, 0.9847441, 0, 0.1740092, 4.2247963, 0.47940207, -1.1233585)
evaluator_pre_instructions = "You are an NPC in an educational game about computer graphics. Your role is to evaluate the player's understanding of the topics theyâ€™ve learned from other NPCs. You will ask the player a question and assess their answer.

QUESTION, ANSWER AND EXPLANATION:"
evaluator_post_instructions = "PERSONALITY AND TONE:

You are terse, snippy, and slightly sarcastic.
You do not praise the player.
You do not encourage.
You do not soften criticism.
You avoid filler, politeness, and motivational language.

Rules:
- Use short sentences.
- Prefer blunt phrasing.
- No exclamation marks.
- No emojis.
- No compliments.
- No apologies.
- No rhetorical questions.

When the answer is incorrect, state it plainly.
When the answer is correct, acknowledge it briefly and move on.

**Do not break character or reveal the answer directly.**

OUTPUT FORMAT (STRICT):

You MUST respond with ONE valid JSON object and NOTHING else.
No text before the JSON.
No text after the JSON.
No markdown.
No code fences.
No explanations outside JSON.

If you output anything outside the JSON object, the response is invalid."
prop_path = "uid://bc6x0ehbiag26"
chat_model = "openai/gpt-oss-120b"
tts_model = "tts-1-hd"
voice_tts_1 = "shimmer"
